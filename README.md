
<!-- README.md is generated from README.Rmd. Please edit that file -->
[![Travis build status](https://travis-ci.org/gederajeg/wordpairs.svg?branch=master)](https://travis-ci.org/gederajeg/wordpairs) [![AppVeyor build status](https://ci.appveyor.com/api/projects/status/github/gederajeg/wordpairs?branch=master&svg=true)](https://ci.appveyor.com/project/gederajeg/wordpairs) [![Coverage status](https://codecov.io/gh/gederajeg/wordpairs/branch/master/graph/badge.svg)](https://codecov.io/github/gederajeg/wordpairs?branch=master) [![Project Status: Active â€“ The project has reached a stable, usable state and is being actively developed.](http://www.repostatus.org/badges/latest/active.svg)](http://www.repostatus.org/#active) [![lifecycle](https://img.shields.io/badge/lifecycle-maturing-blue.svg)](https://www.tidyverse.org/lifecycle/#maturing) [![DOI](https://img.shields.io/badge/doi-10.26180/5ba868cee0ef4-blue.svg?style=flat&labelColor=gainsboro&logoWidth=40&logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAFAAAAAZCAYAAACmRqkJAAAKi0lEQVR4Ae3ZaVBUV97H8evuE0EfH32MmkcfoyAuGjXKgkvMaFRAFuiloemWvRuEXlgEBREXBYJiXAQUFeKocUniQiKogAJhQWwWENDEjLNYvjFLzUzNkplEZb5kTme6nCRjKlOpSZlb9SmL2%2Ffcuv3re87%2FnKP0TYfOcslqPMbt63xBKuh09MTxgi7HKT1Sj1TvKp%2BMkZB6%2FXT8c4AjUYPyVdfb7Qs6HTIJ8EHe7Ul%2B152CphDabRQ0uMr7%2FRQgh%2B8qU6%2FBiPDVGv0jq0uGE94b0ZZ3j%2B25MTetoMsh%2FWD91OBqT9%2Fsehd5EqGV17nKMzTqOHvaRMMLEp7qACfinq%2FW1BBx5ZxB13x5X3Jr1v%2Fz9pUcaHU63PiicjrhvXfNRbY1Th49Q6Y1vu6zyqSjzX3aVIgf4OkKToxhgxpd5OMzV0bYE4CRN1Chu34pnTfwnV03FiTlfzDRXBHo6dfgIq8sX6ByV6vjthGc0UdrrPPVGFQBxlSjzJQWENVUZkebceiLpyM8IZSx7O7Zl4JivUNMZX5h8Rt4%2B2L0llKfgu6JKa%2BXvpB5bZ48%2Ba3F6lil2pDkE2rODzCsU0VUnNFHNZQqdS3lx3Utl%2FMILQcfYt5TEeC1GSprgAq0XlgYGLQyxJTlr0uK0DVX7E5s2ZtOgHvLw5fLK9xVmcqguEj%2F2LXbwsvPBkZZKl4j5NcIKinaUsLbejFWZ7m8Do2cmwnb4cFqArRwx3TEYzi%2Bz7DTD0uhxnj8cAEWWUZK%2BTcdhh4pmTWUsW01Y1uCUmNY7Rtqzo5svJSS0poVXtg6yVj7sn9qunek3j8xPVXXeMFoaDkev6lDF7ene7Y5r2taNAXmEBXaP69zevaOjuUeeZ0zhzJuPsM5CdYvOhZVqBMhBqIVDt8zwGdQjR4of9AA%2BXJjUFpww7GodnHAQca4srDAWCXjW3pETal%2BbfumuOLKqSm17vIQtWr1Uu3JYy6JbXuXFbRN1R8pm5byxtG5CcdOz9EUVc7I5IeQEWQ7wWVwzwrsRn%2BbAFeiCxNsKv5Y9P03BFgjAlT90AGOQy2T47fObl00ocFZHl%2B2UGXw0RjzNUWHTPFthckHWh18al8KsGuaFigVVzlKuY%2BG9z37qvuoGlelpsJVldrgrFjbOE%2BeWe8uW18W84qCqc4s7tmCIgzI75hs%2FaJKNFu7rF%2BIIIhr%2BmIQ%2Btn8LQkDMQOeWAYnDHgsQI3NNU7W9j4h5t72o%2FEyvLEQ%2F%2Bu7ymzbOxbCAeOxAgtghz6YgOVYiufEOUlqu0M37ho%2BYn%2FnpJT8bsejVSt90uqdFdlGmV7hF7cuWXetNCShLX%2BI3nKhN%2ByvCs%2Bs6GQpWB33fzKNQR%2BqWr022yvc94q7spBCY%2Bbzkou6ZfJNPf89ZN%2FdidYHnIsKfIzjCMIc7MAwSJiMPFxGMcKQixGwx07R%2FiEe4CNsxFCbAJvwifj8LkIgYRHa8Lm47jNY8AokmMS5NryPh%2FijOB%2BOX4h7foEuyPHlisMtylJpzu1YspkQ36YbLqnx8F1X4abaqmYs9DGmLlrk4CE9XlHlKZskxfpt%2FUJLzyhV23dG%2BITF72fqo9njEaokwIu8lSbG1N4wx273CrP%2B%2BjniQVZhGrzQjlEioFIRcjDM6MIdjBVtHogvl4W9qIX8sTfwU5SgU%2FzdhdGYLcJ9BzvRID6vgx2SxN8PUI9KnIEWH4n7FuIo%2FoRfYV5vMMV4wHRFs%2BvG%2FKl05ZrDVdP11T7eulK3oNQcz%2FAXcj3DpMePjO44KetDL2lDh%2FmV1S3nNoeWnJb7RSXmMJl%2BI0GmH13rKs8lvEdQwfoWKmCxdmGbAEdgAW5jFiQhBb8WXSYTPSjGCBHaMPR5LMANkOCM%2B%2FgD3MS5Z8W1ElzwW3HNJCSI9tcw2ub%2BO8T5LPTBQBy1nusNcB7ztximI1sIsSSzXb04v3vyusJmx63nMufHXlV6LvpEShDd9x%2FHFYWXVPuSX7%2FD7zmpcjuWRupbyvaHnj8Z7BNsUFCArm70iTRcd5bFEN7oxwJs%2FpoA%2FwfBaLJ2Z2EFbmEsNKL7fYYPUI9DIqj%2Fsgkw0CasW%2BL6RbBDFI7gTZSKzz6Gk02AJ23G3QF4xybYU8INce6s5CJNlTyXhYwKv%2FRWMiEeimquzIhrPpGzuSNCsbvLec2%2Brpmh2e0yu%2FxOp96wv6p8X0xeIZW5Bo2%2F6ucdvb%2FdMWVDm8lX11pRpD16OJ6VyZsrQ8yK%2BVFJ9h4UhwEHDj5JgGE23UkSfoZujMMzSESNCPBT9KAFjqi2rcIYZRPgYmzDQ9xDLSz4%2FGsCPIE%2BNkWrTJy%2FhRrRthpVyJJExbnmG2I%2B6x%2BT%2FHxYyQkzQfJGlufpWy6bYlvPUEgu%2BHlHJA5boo7rE3blnBR7r6mv%2BvCBMYEag%2Faqsyr1%2BIk5a%2Fd2z9zGBDpZ31qulCWk9443Hfg5BuJJAgxAG0ZBEmS4DZ7RKIliMVi0d8UvRUCeuPoNAf4Z%2FmgV13pAwiwR3iffFKBQJM5noB%2F6Y5h45v7Wwf0cDtD1DlMIeiugWmZOy5Cv3RgjX7%2FF4GdMXasOjgurmqdafqpojltml9IjvOJ8NMu9lNL5gQmXdMu0BTefz8loMyoJvivs3VMZvhpjqaig%2FZ8gwJGYIsIKRh%2FY4wh%2Bg%2FGQoxYbREgZ%2BB3uww1V3xKgN%2BrwCNtF4Pvx8NveQCEYX%2BAukhCIYuHZLy%2FyDjHbJQfo7PTK1dEBWqPBX2vS%2B2hNW1XquDURypiwXStCjVWuyrSKQC%2FdoUaHtOT2HENoyal4b40x7rK7ylip9NIV3Jy0P6fD24fl3Ra6uoe3PNqOH2Pw3x%2FC8K8CHIU%2BIpQ7OI8yNOJ9TMJO%2FAU9Nn6PjRiGmm%2FpwgsRLQpKjwjuU%2Fz1CQK0R4G4T4%2FwCHWYKlmcA6xr4SA2EzobXeUa9vh21LgpdKxK8hqd5RsaXWS7S9YvlhU2O7ya3ekXrm%2B9lK3KzFH6a4y5V92Ve5hkM4d02EShMestZekE2IxZX7MWdkAgBtmsi9U2lXEwliAOK%2BGLTowThWIZkrEVSSKYgegPOUxwtFmdaBGLsRgg2qeKtosQDh2GYzbisUIEaPvcQ8T5VGzCKowBk2I3mTVALe4wd4tumKcoaZirSKte4RtVrvXwLrw%2BJXV%2F18Ts3BtLEmOaS0yRtRdMfpGJhTKNMbDJWR5V7eEbUNDtcIQAd1PJMwnuJl6E9KQHY7AAHkzQoBkj8B%2B%2FpTWQ4Maezne1P3x1esLBuqmB%2BbccNhJMGetbM%2BGZIi1V%2FoRyOXB77sKVWuPmrd4RBvYQm9ihVue%2F7xDPGljB50MoJmO%2By36gCGsQovCyCGwOarD9R7PLLXZOJjKZvse%2FDQQSvffG7F1rWrZPiLKUX2DPr1hbfHAKb0kDBSeTed5MQj94Pn1xBMvA%2B2IDYTAkcXzXANPRjHq04ACeFeH9aAIcBC3LOq%2FY5pPDeYtO4yRTmzUhbx9LozCEea8ybaHoxDNmVtPltxSVzxhCm3Asg4Tvs683Aa5wwkD8qP9XbgQqUbb6Tp09U5Os3rWiV4jZv2OuvxPdvht70RfST8fjATZd7P33OYzxZ%2FdF7FwcgqPU0yMR2vMYDulpDfBvw%2BGCdBePpq8AAAAASUVORK5CYII%3D)](http://dx.doi.org/10.26180/5ba868cee0ef4)

wordpairs
=========

The goal of wordpairs is to retrieve the occurrences of a pair of words in sentences. This is still under development and it is originally designed with sentence-based corpus of the Indonesian [Leipzig Corpora Collection](http://wortschatz.uni-leipzig.de/en/download) as the input. If each line of your corpus text does not correspond to one sentence as in the Leipzig Corpora (e.g., consisting of multiple sentences or split sentences between multiple lines), few tweaking is needed (read further below after the **Example** section).

Installation
------------

You can install the development version of wordpairs from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("gederajeg/wordpairs")
```

Example
-------

Here is an example to search for the occurrences of Indonesian words with *me- -kan* confix, which indicate (di)transitive verbs, and the preposition *kepada* 'to(wards) sb.'. The package comes with a random sample of 25,000 sentences from one corpus file of the Indonesian Leipzig Corpora (i.e. the `"ind_news_2008_300K-sentences.txt"`).

``` r
library(wordpairs)
word_1 <- "\\bmen[a-z]{3,}kan\\b"
word_2 <- "\\bkepada\\b"
corpus <- my_leipzig_sample
m <- word_pairs(corpus,
                word_1 = word_1,
                word_2 = word_2,
                min_intervening = 0L,
                max_intervening = 3L)
```

Next, we can inspect snippets of the output as follows.

``` r
str(m)
#> List of 3
#>  $ pattern       : chr [1:222] "menyampaikan secara langsung kepada" "mengutamakan pemberian kredit kepada" "menuangkan pikiran dan menyampaikan kepada" "mengembalikan ID card kepada" ...
#>  $ pattern_tagged: chr [1:222] "<w id='1'>menyampaikan</w> secara langsung <w id='2'>kepada</w>" "<w id='1'>mengutamakan</w> pemberian kredit <w id='2'>kepada</w>" "<w id='1'>menuangkan</w> pikiran dan menyampaikan <w id='2'>kepada</w>" "<w id='1'>mengembalikan</w> ID card <w id='2'>kepada</w>" ...
#>  $ matches       : chr [1:222] "271940 Namun, Mensos Bachtiar Chamsyah mengatakan, ia sudah <m><w id='1'>menyampaikan</w> secara langsung <w id"| __truncated__ "232967 Dia menjelaskan bahwa selektif kredit ini untuk mengurangi resiko bank akan <m><w id='1'>mengutamakan</w"| __truncated__ "61079 Orang asing yang cinta Bali, yang memiliki gagasan positif untuk mengembangkan Bali, pasti merasa tidak s"| __truncated__ "79192 Inilah yang menyebabkan belasan wartawan yang sebelumnya diundang untuk meliput kegiatan tersebut kecewa,"| __truncated__ ...
```

The `pattern` consists of the extracted patterns for the co-occurrences of `word_1` and `word_2`. Note that `word_1` always precedes `word_2`, if they do co-occur in a sentence. To reverse the co-occurrence sequence, reverse the input for `word_1` with `word_2`, and *vice versa*.

The `pattern_tagged` is the tagged version of elements in `pattern`. The tags enclose `word_1` and `word_2`, but not the intervening strings.

The `matches` shows the occurrences of the `pattern` in the full sentential contexts in which they are found.

Next, we can create a frequency table for the detected co-occurrence patterns, using the [dplyr](https://dplyr.tidyverse.org) package from the [tidyverse](https://www.tidyverse.org).

``` r
# generate frequency table for the patterns using `dplyr` package
library(dplyr)
freq_tb <- 
  tibble(pattern = m$pattern_tagged) %>% 
  count(pattern, sort = TRUE)
head(freq_tb)
#> # A tibble: 6 x 2
#>   pattern                                                         n
#>   <chr>                                                       <int>
#> 1 <w id='1'>mengatakan</w> <w id='2'>kepada</w>                  56
#> 2 <w id='1'>mengingatkan</w> <w id='2'>kepada</w>                 6
#> 3 <w id='1'>mengucapkan</w> terima kasih <w id='2'>kepada</w>     5
#> 4 <w id='1'>menyampaikan</w> <w id='2'>kepada</w>                 5
#> 5 <w id='1'>mengemukakan</w> <w id='2'>kepada</w>                 4
#> 6 <w id='1'>mengusulkan</w> <w id='2'>kepada</w>                  4
```

Tweaking non-sentence corpus input
----------------------------------

As mentioned above, non-sentence corpus needs to be preprocessed before using it as input for `word_pairs()`. The package includes an example of typical input text where each line does not correspond to one sentence, or the sentence elements got split into two or more lines.

``` r
wordpairs::bola_corpus_text
#>  [1] "Namun, sejatinya tawaran yang lebih konkret justru datang dari klub Inggris dan"  
#>  [2] "dan Jerman. Sedangkan dua klub Italia itu baru sekedar mencari informasi."        
#>  [3] "\"Beberapa tawaran yang lebih konkret datang dari klub Inggris dan Jerman. Mereka"
#>  [4] "benar-benar menunjukkan ketertarikannya terhadap klien saya. Sedangkan klub-klub" 
#>  [5] "Italia sejauh ini baru sekedar mencari keterangan,\" ungkap Guerra."              
#>  [6] "Dua klub yang terlebih dahulu telah mengajukan tawaran adalah Newcastle United"   
#>  [7] "dan Wender Bremen. Kemungkinan besar dua klub asal Serie A itu akan menyusul"     
#>  [8] "untuk bersaing mendapatkan mantan pemain Olympique Lyon itu."                     
#>  [9] "Klub yang bermarkas di San Siro itu berpeluang besar jika serius mengejar Ben"    
#> [10] "Arfa. Pasalnya, pemain sayap kiri tersebut juga mulai menunjukkan"                
#> [11] "ketertarikannya kepada Milan. Secara terang-terangan agen itu juga berani"        
#> [12] "menyebutkan harga yang dipatok untuk merekrut kliennya sebesar 93,6 miliar"       
#> [13] "rupiah."                                                                          
#> [14] "\"Saya yakin ia merupakan sosok pemain penting dengan teknik yang bagus dan dapat"
#> [15] "meningkatkan kualitas lini tengah I Rossoneri. Ben Arfa juga akan mendapat"       
#> [16] "banyak keuntungan jika bermain dengan klub sebesar Milan dengan 75 ribu orang di" 
#> [17] "dalam stadion. Berapa nilai yang layak untuk seorang pemain seperti Ben Arfa? 8"  
#> [18] "juta Euro,\" tambahnya."
```

We can see, for instance, that the beginning of line two contains elements (i.e. the strings `"dan Jerman."`) of sentence in line one. The first step to handle this is to collapse elements of this character vector into one long character vector.

``` r
bola_corpus <- paste(wordpairs::bola_corpus_text, collapse = " ")
```

Next, we can use the `tokenize_sentences()` function from the [tokenizers](https://cran.r-project.org/web/packages/tokenizers/index.html) (Mullen, Benoit, Keyes, Selivanov, & Arnold, 2018) package to split the collapsed string into character vector whose elements correspond to one sentence. You first need to install the tokenizers package in R.

``` r
# install tokenizers if you have not done it.
# install.packages("tokenizers")

bola_corpus <- tokenizers::tokenize_sentences(bola_corpus, simplify = TRUE)
bola_corpus
#>  [1] "Namun, sejatinya tawaran yang lebih konkret justru datang dari klub Inggris dan dan Jerman."                                     
#>  [2] "Sedangkan dua klub Italia itu baru sekedar mencari informasi."                                                                   
#>  [3] "\"Beberapa tawaran yang lebih konkret datang dari klub Inggris dan Jerman."                                                      
#>  [4] "Mereka benar-benar menunjukkan ketertarikannya terhadap klien saya."                                                             
#>  [5] "Sedangkan klub-klub Italia sejauh ini baru sekedar mencari keterangan,\" ungkap Guerra."                                         
#>  [6] "Dua klub yang terlebih dahulu telah mengajukan tawaran adalah Newcastle United dan Wender Bremen."                               
#>  [7] "Kemungkinan besar dua klub asal Serie A itu akan menyusul untuk bersaing mendapatkan mantan pemain Olympique Lyon itu."          
#>  [8] "Klub yang bermarkas di San Siro itu berpeluang besar jika serius mengejar Ben Arfa."                                             
#>  [9] "Pasalnya, pemain sayap kiri tersebut juga mulai menunjukkan ketertarikannya kepada Milan."                                       
#> [10] "Secara terang-terangan agen itu juga berani menyebutkan harga yang dipatok untuk merekrut kliennya sebesar 93,6 miliar rupiah."  
#> [11] "\"Saya yakin ia merupakan sosok pemain penting dengan teknik yang bagus dan dapat meningkatkan kualitas lini tengah I Rossoneri."
#> [12] "Ben Arfa juga akan mendapat banyak keuntungan jika bermain dengan klub sebesar Milan dengan 75 ribu orang di dalam stadion."     
#> [13] "Berapa nilai yang layak untuk seorang pemain seperti Ben Arfa?"                                                                  
#> [14] "8 juta Euro,\" tambahnya."
```

Now, `bola_corpus` vector can be used as input for the `corpus` argument of `word_pairs()`.

Citation
--------

To cite wordpairs, please use:

-   Rajeg, Gede Primahadi Wijaya. (2018). *wordpairs*: An R package to retrieve word pair in sentences. Retrieved from: <https://gederajeg.github.io/wordpairs/>

References
----------

Mullen, L. A., Benoit, K., Keyes, O., Selivanov, D., & Arnold, J. (2018). Fast, consistent tokenization of natural language text. *Journal of Open Source Software*, *3*(23), 655. doi:[10.21105/joss.00655](https://doi.org/10.21105/joss.00655)
